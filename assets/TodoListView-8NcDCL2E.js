import{a as k,u as Q,b as S,c as L,d as x,e as f,o as u,f as o,_ as R,t as $,r as _,F as D,g as I,h as v,n as T,w as E,v as P,i as U,s as M,j as y,k as r,l as b,m as X,p as j,q as O,x as K,y as N,z as w,A as G,B,C as J,D as W,T as Y,E as Z,G as ee,H as V,I as te,J as oe,K as se}from"./index-BI7dX1av.js";const ne={VITE_APP_BASEURL:"https://todolist-api.hexschool.io"},{VITE_APP_BASEURL:C}=ne,ae=async()=>(await k.get(`${C}/todos`)).data,re=e=>k.post(`${C}/todos`,{content:e}),ie=e=>k.patch(`${C}/todos/${e}/toggle`),le=async e=>(await k.delete(`${C}/todos/${e}`)).data,ue=async({id:e,content:t})=>(console.log("editTodo",e,t),(await k.put(`${C}/todos/${e}`,{content:t})).data),de=(e={})=>Q({queryKey:["todo"],queryFn:ae,enabled:e.enabled??!1,staleTime:1e3*60*5,cacheTime:1e3*60*30}),ce=()=>{const e=S();return L({mutationFn:re,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{x("error",t.response.data.message||"新增失敗，請重試或是洽詢客服")}})},me=()=>{const e=S();return L({mutationFn:le,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{x("error",t.response.data.message||"移除失敗，請重試或是洽詢客服")}})},pe=()=>{const e=S();return L({mutationFn:ie,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{x("error",t.response.data.message||"完成勾選失敗，請重試或是洽詢客服")}})},he=()=>{const e=S();return L({mutationFn:ue,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{x("error",t.response.data.message||"編輯失敗，請重試或是洽詢客服")}})},fe={class:"w-full px-5"},ve={class:"flex justify-between items-center"},ge={class:"flex"},ye={class:"font-bold hidden sm:block me-6"},be={__name:"DashBoardHeader",props:{userNickname:{type:String,required:!0}},emits:["sign_out"],setup(e,{emit:t}){const a=e,d=t,c=()=>{d("sign_out")};return(p,i)=>(u(),f("header",fe,[o("div",ve,[i[0]||(i[0]=o("img",{src:R,alt:"logo",style:{width:"242.51px"}},null,-1)),o("div",ge,[o("h2",ye,$(a.userNickname)+"的代辦",1),o("a",{role:"button",class:"hover:text-red-700",onClick:c},"登出")])])]))}},_e="/HS_vue_online_toolBox/empty%201.svg",we={class:"font-normal py-4 flex flex-col gap-y-4"},xe={key:0,class:"border-b-2 border-neutral-100 -mb-[2px] pb-4 flex items-center"},$e=["onClick"],ke=["onClick"],Ce={class:"ms-auto flex items-center gap-x-2"},Te=["onClick"],Se=["onClick"],Le={key:1,class:"flex items-center"},Ne=["onUpdate:modelValue"],Be={class:"ms-auto flex items-center gap-x-2"},Me=["onClick"],Ee=["onClick"],Fe={key:1},qe={__name:"TodoList",props:{mode:{type:String,default:"all"},todoList:{type:Array,required:!0}},setup(e){const t=e,{mutate:a}=me(),d=s=>{U("warning","確定要刪除此代辦嗎").then(n=>{n.isConfirmed&&a(s,{onSuccess:()=>{M("success","刪除代辦成功")}})})},{mutate:c}=pe(),{mutate:p}=he(),i=_({}),h=(s,n="")=>{i.value[s]?(i.value[s].isEditing=!i.value[s].isEditing,i.value[s].content=n):i.value[s]={isEditing:!0,content:n}},l=(s,n)=>{if(!n){x("error","請輸入代辦事項");return}p({id:s,content:n},{onSuccess:()=>{M("success","編輯成功"),h(s)}})};return(s,n)=>(u(),f("ul",we,[e.todoList.length?(u(!0),f(D,{key:0},I(t.todoList,m=>(u(),f("li",{key:m.id},[i.value[m.id]?.isEditing?(u(),f("div",Le,[E(o("input",{type:"text",class:"bg-neutral-100 text-neutral-500 leading-none border-b-1 border-neutral-300 rounded-[10px] focus:ring-neutral-500 focus:border-neutral-500 block w-[80%] py-2 ps-3 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":g=>i.value[m.id].content=g},null,8,Ne),[[P,i.value[m.id].content]]),o("div",Be,[o("button",{type:"button",onClick:g=>h(m.id)},[...n[4]||(n[4]=[o("span",{class:"material-symbols-outlined close-icon text-alert-500"}," close ",-1)])],8,Me),o("button",{type:"button",onClick:g=>l(m.id,i.value[m.id].content)},[...n[5]||(n[5]=[o("span",{class:"material-symbols-outlined circle-icon text-lime-600"}," circle ",-1)])],8,Ee)])])):(u(),f("div",xe,[m.status?(u(),f("button",{key:0,type:"button",onClick:g=>v(c)(m.id)},[...n[0]||(n[0]=[o("span",{class:"material-symbols-outlined check-icon text-primary-500 hover:text-alert-500"}," check ",-1)])],8,$e)):(u(),f("button",{key:1,type:"button",onClick:g=>v(c)(m.id)},[...n[1]||(n[1]=[o("span",{class:"material-symbols-outlined checkbox-icon text-neutral-300 hover:text-alert-500"}," check_box_outline_blank ",-1)])],8,ke)),o("p",{class:T(["ms-4",m.status?"text-neutral-300 line-through":""])},$(m.content),3),o("div",Ce,[o("button",{type:"button",onClick:g=>h(m.id,m.content)},[...n[2]||(n[2]=[o("span",{class:"material-symbols-outlined edit-icon text-neutral-500 hover:text-alert-500"}," edit_square ",-1)])],8,Te),o("button",{type:"button",onClick:g=>d(m.id)},[...n[3]||(n[3]=[o("span",{class:"material-symbols-outlined delete-icon text-neutral-500 hover:text-alert-500"}," delete ",-1)])],8,Se)])]))]))),128)):(u(),f("li",Fe,"目前並無"+$(e.mode==="isDone"?"已完成":"待完成")+"代辦事項",1))]))}},Ae={key:0,class:"bg-white text-sm rounded-[10px] px-4 pb-4 md:px-6 custom-drop-shadow"},He={class:"text-neutral-300 dark:text-gray-400 text-center font-bold flex flex-wrap -mx-4 -mb-[2px]"},Ve={class:"w-1/3"},De={class:"w-1/3"},Ie={class:"w-1/3"},Pe={class:"py-2"},Ue={key:1,class:"w-2/3 mx-auto mt-8 flex flex-col lg:mt-12"},ze={__name:"TodoBox",props:{todos:{type:Object}},setup(e){const t=e,a=_("all"),d=l=>{a.value=l},c=y(()=>{switch(a.value){case"isDone":return t.todos?.data.filter(l=>l.status)??[];case"undone":return t.todos?.data.filter(l=>!l.status)??[];default:return t.todos?.data??[]}}),p=y(()=>t.todos?.data.length??0),i=y(()=>t.todos?.data.filter(l=>!l.status).length??0),h=l=>({"block p-4 border-b-2":!0,"border-neutral-100 hover:border-gray-300":a.value!==l,"text-neutral-500 border-neutral-500":a.value===l});return(l,s)=>p.value!==0?(u(),f("div",Ae,[o("ul",He,[o("li",Ve,[o("a",{class:T(h("all")),onClick:s[0]||(s[0]=b(n=>d("all"),["prevent"]))},"全部",2)]),o("li",De,[o("a",{class:T(h("undone")),onClick:s[1]||(s[1]=b(n=>d("undone"),["prevent"])),"aria-current":"page"},"待完成",2)]),o("li",Ie,[o("a",{class:T(h("isDone")),onClick:s[2]||(s[2]=b(n=>d("isDone"),["prevent"]))},"已完成",2)])]),r(qe,{mode:a.value,"todo-list":c.value},null,8,["mode","todo-list"]),o("p",Pe,$(i.value)+" 個待完成項目",1)])):(u(),f("div",Ue,[...s[3]||(s[3]=[o("p",{class:"text-center mb-4"},"目前尚無待辦事項",-1),o("img",{src:_e,alt:"目前尚無待辦事項"},null,-1)])]))}},Qe=3,z=X("todoStore",()=>{const e=_([]);function t(a){e.value.length<Qe?e.value.unshift(a):(e.value.unshift(a),e.value.pop())}return{historyTodos:e,saveHistoryTodos:t}}),Re={key:0,class:"w-full absolute top-0 left-0 translate-y-[56px]"},Xe={class:"bg-white text-sm rounded-[10px] px-4 py-4 md:px-6 custom-drop-shadow"},je={class:"font-normal -mx-4 flex flex-col gap-y-2"},Oe=["onMousedown"],Ke={__name:"TodoHistoryList",props:{isShowHistory:{type:Boolean,required:!0}},emits:["add-history"],setup(e,{emit:t}){const a=e,d=t,c=z(),{historyTodos:p}=j(c),i=h=>{d("add-history",h)};return(h,l)=>a.isShowHistory&&v(p).length>0?(u(),f("div",Re,[o("div",Xe,[o("ul",je,[(u(!0),f(D,null,I(v(p),s=>(u(),f("li",{key:s,class:"px-3 py-2 flex items-center hover:bg-neutral-100",onMousedown:b(n=>i(s),["prevent"])},[l[0]||(l[0]=o("span",{class:"material-symbols-outlined me-4"}," history_2 ",-1)),K(" "+$(s),1)],40,Oe))),128))])])])):O("",!0)}},Ge={__name:"TodoAddInput",setup(e){const t=_(""),{mutate:a}=ce(),d=z(),{saveHistoryTodos:c}=d,p=s=>{if(!s){x("error","請輸入代辦事項");return}a(s,{onSuccess:()=>{c(s),M("success","新增成功"),t.value=""}})},i=_(!1),h=()=>{setTimeout(()=>{i.value=!1},150)},l=s=>{t.value=s,i.value=!1};return(s,n)=>(u(),f("form",{class:"relative",onSubmit:n[2]||(n[2]=b(m=>p(t.value),["prevent"]))},[E(o("input",{type:"text",id:"register_nickname",class:"bg-neutral-50 text-neutral-500 border-none rounded-[10px] focus:ring-neutral-500 focus:border-neutral-500 block w-full py-3 ps-4 custom-drop-shadow",placeholder:"新增待辦事項","onUpdate:modelValue":n[0]||(n[0]=m=>t.value=m),onFocus:n[1]||(n[1]=()=>i.value=!0),onBlur:h},null,544),[[P,t.value,void 0,{trim:!0}]]),n[3]||(n[3]=o("button",{type:"submit",class:"btn-square btn-neutral rounded-[10px] absolute bottom-0 right-0 -translate-[4px]"},[o("span",{class:"material-symbols-outlined add-icon"}," add ")],-1)),r(Ke,{"is-show-history":i.value,onAddHistory:l},null,8,["is-show-history"])],32))}};/**
 * Vue 3 Loading Overlay 0.0.0
 * (c) 2020
 * @license MIT
 */var F=N({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});const Je=r("g",{fill:"none","fill-rule":"evenodd"},[r("g",{transform:"translate(1 1)","stroke-width":"2"},[r("circle",{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}),r("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[r("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"})])])],-1);function We(e,t,a,d,c,p){return u(),w("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,stroke:e.color},[Je],8,["width","height","stroke"])}F.render=We;F.__file="src/loaders/Spinner.vue";var q=N({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}});const Ye=r("circle",{cx:"15",cy:"15",r:"15"},[r("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1),Ze=r("circle",{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"},[r("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})],-1),et=r("circle",{cx:"105",cy:"15",r:"15"},[r("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1);function tt(e,t,a,d,c,p){return u(),w("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:e.color,width:e.width,height:e.height},[Ye,Ze,et],8,["fill","width","height"])}q.render=tt;q.__file="src/loaders/Dots.vue";var A=N({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}});const ot=r("rect",{x:"0",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})],-1),st=r("rect",{x:"10",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})],-1),nt=r("rect",{x:"20",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})],-1);function at(e,t,a,d,c,p){return u(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:e.height,width:e.width,fill:e.color},[ot,st,nt],8,["height","width","fill"])}A.render=at;A.__file="src/loaders/Bars.vue";var rt={Spinner:F,Dots:q,Bars:A},H=N({name:"vue-loading",props:{active:Boolean,programmatic:Boolean,container:[Object,Function,HTMLElement],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:{type:Number,default:100},loader:{type:String,default:"spinner"}},setup(e,t){const a=_(e.active),d=y(()=>({background:e.backgroundColor,opacity:e.opacity,backdropFilter:`blur(${e.blur})`})),c=()=>{e.programmatic&&(a.value=!1,setTimeout(()=>{},150))},p=()=>{!e.canCancel||!a.value||(c(),e.onCancel())},i=s=>{s.keyCode===27&&p()},h=()=>{e.isFullPage&&e.lockScroll&&document.body.classList.add("vld-shown")},l=()=>{e.isFullPage&&e.lockScroll&&document.body.classList.remove("vld-shown")};return Z(()=>{e.programmatic&&(a.value=!0,document.addEventListener("keyup",i))}),ee(()=>{document.removeEventListener("keyup",i)}),V(()=>e.active,()=>{a.value=e.active}),V(a,()=>{a.value?h():l()}),{isActive:a,bgStyle:d,hide:c,cancel:p}},components:rt});const it={class:"vld-icon"};function lt(e,t,a,d,c,p){return u(),w(Y,{ref:"root",name:e.transition},{default:G(()=>[E(r("div",{tabindex:"0",class:["vld-overlay is-active",{"is-full-page":e.isFullPage}],"aria-busy":e.isActive,"aria-label":"Loading",style:{zIndex:e.zIndex}},[r("div",{class:"vld-background",onClick:t[1]||(t[1]=b((...i)=>e.cancel&&e.cancel(...i),["prevent"])),style:e.bgStyle},null,4),r("div",it,[B(e.$slots,"before"),B(e.$slots,"default",{},()=>[(u(),w(J(e.loader),{color:e.color,width:e.width,height:e.height},null,8,["color","width","height"]))]),B(e.$slots,"after")])],14,["aria-busy"]),[[W,e.isActive]])]),_:3},8,["name"])}H.render=lt;H.__file="src/main/Component.vue";const ut={__name:"FullScreenLoading",props:{showLoading:{type:Boolean,required:!0}},setup(e){const t=e;return(a,d)=>(u(),w(v(H),{active:t.showLoading,"is-full-page":!0,color:"#ffd370",loader:"spinner",width:64,height:64,"background-color":"#ffffff",opacity:.5,"z-index":999},null,8,["active"]))}},dt={class:"sm:bg-linear-primary min-h-screen"},ct={class:"mx-auto px-3 pt-4"},mt={class:"w-full sm:w-2/3 lg:w-1/2 mx-auto mt-4 sm:mt-10 px-5"},pt={class:"mt-4"},ft={__name:"TodoListView",setup(e){const{data:t}=te(),{mutate:a}=oe(),d=se(),c=()=>{U("warning","確定要登出嗎").then(n=>{n.isConfirmed&&a(void 0,{onSuccess:()=>{d.push("/login")}})})},p=y(()=>t.value?.status??!1),i=y(()=>t.value?.nickname??""),{data:h,isLoading:l,isFetching:s}=de({enabled:p});return(n,m)=>(u(),f("div",dt,[o("div",ct,[r(be,{"user-nickname":i.value,onSign_out:c},null,8,["user-nickname"]),o("div",mt,[r(Ge),o("div",pt,[r(ze,{todos:v(h)},null,8,["todos"])])])]),r(ut,{"show-loading":v(l)||v(s)},null,8,["show-loading"])]))}};export{ft as default};
