import{a as k,u as z,b as S,c as L,d as b,e as f,o as d,f as o,_ as Q,t as $,r as y,F as V,g as D,h as g,n as T,w as E,v as P,i as R,s as M,j as _,k as r,l as w,m as X,p as j,q as O,x as K,y as N,z as x,A as G,B,C as J,D as W,T as Y,E as Z,G as ee,H as I,I as te,J as oe,K as se}from"./index-Dx1pxIoB.js";const ne={VITE_APP_BASEURL:"https://todolist-api.hexschool.io"},{VITE_APP_BASEURL:C}=ne,ae=async()=>(await k.get(`${C}/todos`)).data,re=e=>k.post(`${C}/todos`,{content:e}),ie=e=>k.patch(`${C}/todos/${e}/toggle`),le=async e=>(await k.delete(`${C}/todos/${e}`)).data,ue=async({id:e,content:t})=>(await k.put(`${C}/todos/${e}`,{content:t})).data,de=(e={})=>z({queryKey:["todo"],queryFn:ae,enabled:e.enabled??!1,staleTime:1e3*60*5,cacheTime:1e3*60*30}),ce=()=>{const e=S();return L({mutationFn:re,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{b("error",t.response.data.message||"新增失敗，請重試或是洽詢客服")}})},me=()=>{const e=S();return L({mutationFn:le,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{b("error",t.response.data.message||"移除失敗，請重試或是洽詢客服")}})},pe=()=>{const e=S();return L({mutationFn:ie,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{b("error",t.response.data.message||"完成勾選失敗，請重試或是洽詢客服")}})},he=()=>{const e=S();return L({mutationFn:ue,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{b("error",t.response.data.message||"編輯失敗，請重試或是洽詢客服")}})},fe={class:"w-full px-5"},ve={class:"flex justify-between items-center"},ge={class:"flex"},ye={class:"font-bold hidden sm:block me-6"},be={__name:"DashBoardHeader",props:{userNickname:{type:String,required:!0}},emits:["sign_out"],setup(e,{emit:t}){const n=e,c=t,m=()=>{c("sign_out")};return(p,l)=>(d(),f("header",fe,[o("div",ve,[l[0]||(l[0]=o("img",{src:Q,alt:"logo",style:{width:"242.51px"}},null,-1)),o("div",ge,[o("h2",ye,$(n.userNickname)+"的代辦",1),o("a",{role:"button",class:"hover:text-red-700",onClick:m},"登出")])])]))}},_e="/HS_vue_online_toolBox/empty%201.svg",we={class:"font-normal py-4 flex flex-col gap-y-4"},xe={key:0,class:"border-b-2 border-neutral-100 -mb-[2px] pb-4 flex items-center"},$e=["onClick"],ke=["onClick"],Ce={class:"ms-auto flex items-center gap-x-2"},Te=["onClick"],Se=["onClick"],Le={key:1,class:"flex items-center"},Ne=["onUpdate:modelValue"],Be={class:"ms-auto flex items-center gap-x-2"},Me=["onClick"],Ee=["onClick"],Fe={key:1},qe={__name:"TodoList",props:{mode:{type:String,default:"all"},todoList:{type:Array,required:!0}},setup(e){const t=e,{mutate:n}=me(),c=a=>{R("warning","確定要刪除此代辦嗎").then(s=>{s.isConfirmed&&n(a,{onSuccess:()=>{M("success","刪除代辦成功")}})})},{mutate:m}=pe(),{mutate:p}=he(),l=y({}),h=(a,s="")=>{l.value[a]?(l.value[a].isEditing=!l.value[a].isEditing,l.value[a].content=s):l.value[a]={isEditing:!0,content:s}},u=(a,s)=>{if(!s){b("error","請輸入代辦事項");return}const i=t.todoList.filter(v=>v.id===a);if(i.length!==0&&i[0]?.content===s){b("error","代辦事項內容並未修改");return}p({id:a,content:s},{onSuccess:()=>{M("success","編輯成功"),h(a)}})};return(a,s)=>(d(),f("ul",we,[e.todoList.length?(d(!0),f(V,{key:0},D(t.todoList,i=>(d(),f("li",{key:i.id},[l.value[i.id]?.isEditing?(d(),f("div",Le,[E(o("input",{type:"text",class:"bg-neutral-100 text-neutral-500 leading-none border-b-1 border-neutral-300 rounded-[10px] focus:ring-neutral-500 focus:border-neutral-500 block w-[80%] py-2 ps-3 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":v=>l.value[i.id].content=v},null,8,Ne),[[P,l.value[i.id].content]]),o("div",Be,[o("button",{type:"button",onClick:v=>h(i.id)},[...s[4]||(s[4]=[o("span",{class:"material-symbols-outlined close-icon text-alert-500"}," close ",-1)])],8,Me),o("button",{type:"button",onClick:v=>u(i.id,l.value[i.id].content)},[...s[5]||(s[5]=[o("span",{class:"material-symbols-outlined circle-icon text-lime-600"}," circle ",-1)])],8,Ee)])])):(d(),f("div",xe,[i.status?(d(),f("button",{key:0,type:"button",onClick:v=>g(m)(i.id)},[...s[0]||(s[0]=[o("span",{class:"material-symbols-outlined check-icon text-primary-500 hover:text-alert-500"}," check ",-1)])],8,$e)):(d(),f("button",{key:1,type:"button",onClick:v=>g(m)(i.id)},[...s[1]||(s[1]=[o("span",{class:"material-symbols-outlined checkbox-icon text-neutral-300 hover:text-alert-500"}," check_box_outline_blank ",-1)])],8,ke)),o("p",{class:T(["ms-4",i.status?"text-neutral-300 line-through":""])},$(i.content),3),o("div",Ce,[o("button",{type:"button",onClick:v=>h(i.id,i.content)},[...s[2]||(s[2]=[o("span",{class:"material-symbols-outlined edit-icon text-neutral-500 hover:text-alert-500"}," edit_square ",-1)])],8,Te),o("button",{type:"button",onClick:v=>c(i.id)},[...s[3]||(s[3]=[o("span",{class:"material-symbols-outlined delete-icon text-neutral-500 hover:text-alert-500"}," delete ",-1)])],8,Se)])]))]))),128)):(d(),f("li",Fe,"目前並無"+$(e.mode==="isDone"?"已完成":"待完成")+"代辦事項",1))]))}},Ae={key:0,class:"bg-white text-sm rounded-[10px] px-4 pb-4 md:px-6 custom-drop-shadow"},He={class:"text-neutral-300 dark:text-gray-400 text-center font-bold flex flex-wrap -mx-4 -mb-[2px]"},Ie={class:"w-1/3"},Ve={class:"w-1/3"},De={class:"w-1/3"},Pe={class:"py-2"},Re={key:1,class:"w-2/3 mx-auto mt-8 flex flex-col lg:mt-12"},Ue={__name:"TodoBox",props:{todos:{type:Object}},setup(e){const t=e,n=y("all"),c=u=>{n.value=u},m=_(()=>{switch(n.value){case"isDone":return t.todos?.data.filter(u=>u.status)??[];case"undone":return t.todos?.data.filter(u=>!u.status)??[];default:return t.todos?.data??[]}}),p=_(()=>t.todos?.data.length??0),l=_(()=>t.todos?.data.filter(u=>!u.status).length??0),h=u=>({"block p-4 border-b-2":!0,"border-neutral-100 hover:border-gray-300":n.value!==u,"text-neutral-500 border-neutral-500":n.value===u});return(u,a)=>p.value!==0?(d(),f("div",Ae,[o("ul",He,[o("li",Ie,[o("a",{class:T(h("all")),onClick:a[0]||(a[0]=w(s=>c("all"),["prevent"]))},"全部",2)]),o("li",Ve,[o("a",{class:T(h("undone")),onClick:a[1]||(a[1]=w(s=>c("undone"),["prevent"])),"aria-current":"page"},"待完成",2)]),o("li",De,[o("a",{class:T(h("isDone")),onClick:a[2]||(a[2]=w(s=>c("isDone"),["prevent"]))},"已完成",2)])]),r(qe,{mode:n.value,"todo-list":m.value},null,8,["mode","todo-list"]),o("p",Pe,$(l.value)+" 個待完成項目",1)])):(d(),f("div",Re,[...a[3]||(a[3]=[o("p",{class:"text-center mb-4"},"目前尚無待辦事項",-1),o("img",{src:_e,alt:"目前尚無待辦事項"},null,-1)])]))}},ze=10,U=X("todoStore",()=>{const e=y([]);function t(n){e.value.length<ze?e.value.unshift(n):(e.value.unshift(n),e.value.pop())}return{historyTodos:e,saveHistoryTodos:t}}),Qe={key:0,class:"w-full absolute top-0 left-0 translate-y-[56px]"},Xe={class:"bg-white text-sm rounded-[10px] px-4 py-4 md:px-6 custom-drop-shadow"},je={class:"font-normal -mx-4 flex flex-col gap-y-2"},Oe=["onMousedown"],Ke={__name:"TodoHistoryList",props:{isShowHistory:{type:Boolean,required:!0}},emits:["add-history"],setup(e,{emit:t}){const n=e,c=t,m=U(),{historyTodos:p}=j(m),l=h=>{c("add-history",h)};return(h,u)=>n.isShowHistory&&g(p).length>0?(d(),f("div",Qe,[o("div",Xe,[o("ul",je,[(d(!0),f(V,null,D(g(p),a=>(d(),f("li",{key:a,class:"px-3 py-2 flex items-center hover:bg-neutral-100",onMousedown:w(s=>l(a),["prevent"])},[u[0]||(u[0]=o("span",{class:"material-symbols-outlined me-4"}," history_2 ",-1)),K(" "+$(a),1)],40,Oe))),128))])])])):O("",!0)}},Ge={__name:"TodoAddInput",setup(e){const t=y(""),{mutate:n}=ce(),c=U(),{saveHistoryTodos:m}=c,p=y(null),l=s=>{if(!s){b("error","請輸入代辦事項");return}n(s,{onSuccess:()=>{m(s),p.value?.blur(),M("success","新增成功"),t.value=""}})},h=y(!1),u=()=>{setTimeout(()=>{h.value=!1},150)},a=s=>{t.value=s,h.value=!1};return(s,i)=>(d(),f("form",{class:"relative",onSubmit:i[2]||(i[2]=w(v=>l(t.value),["prevent"]))},[E(o("input",{type:"text",id:"register_nickname",ref_key:"addInputRef",ref:p,class:"bg-neutral-50 text-neutral-500 border-none rounded-[10px] focus:ring-neutral-500 focus:border-neutral-500 block w-full py-3 ps-4 custom-drop-shadow",placeholder:"新增待辦事項","onUpdate:modelValue":i[0]||(i[0]=v=>t.value=v),onFocus:i[1]||(i[1]=()=>h.value=!0),onBlur:u},null,544),[[P,t.value,void 0,{trim:!0}]]),i[3]||(i[3]=o("button",{type:"submit",class:"btn-square btn-neutral rounded-[10px] absolute bottom-0 right-0 -translate-[4px]"},[o("span",{class:"material-symbols-outlined add-icon"}," add ")],-1)),r(Ke,{"is-show-history":h.value,onAddHistory:a},null,8,["is-show-history"])],32))}};/**
 * Vue 3 Loading Overlay 0.0.0
 * (c) 2020
 * @license MIT
 */var F=N({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});const Je=r("g",{fill:"none","fill-rule":"evenodd"},[r("g",{transform:"translate(1 1)","stroke-width":"2"},[r("circle",{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}),r("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[r("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"})])])],-1);function We(e,t,n,c,m,p){return d(),x("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,stroke:e.color},[Je],8,["width","height","stroke"])}F.render=We;F.__file="src/loaders/Spinner.vue";var q=N({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}});const Ye=r("circle",{cx:"15",cy:"15",r:"15"},[r("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1),Ze=r("circle",{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"},[r("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})],-1),et=r("circle",{cx:"105",cy:"15",r:"15"},[r("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1);function tt(e,t,n,c,m,p){return d(),x("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:e.color,width:e.width,height:e.height},[Ye,Ze,et],8,["fill","width","height"])}q.render=tt;q.__file="src/loaders/Dots.vue";var A=N({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}});const ot=r("rect",{x:"0",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})],-1),st=r("rect",{x:"10",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})],-1),nt=r("rect",{x:"20",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})],-1);function at(e,t,n,c,m,p){return d(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:e.height,width:e.width,fill:e.color},[ot,st,nt],8,["height","width","fill"])}A.render=at;A.__file="src/loaders/Bars.vue";var rt={Spinner:F,Dots:q,Bars:A},H=N({name:"vue-loading",props:{active:Boolean,programmatic:Boolean,container:[Object,Function,HTMLElement],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:{type:Number,default:100},loader:{type:String,default:"spinner"}},setup(e,t){const n=y(e.active),c=_(()=>({background:e.backgroundColor,opacity:e.opacity,backdropFilter:`blur(${e.blur})`})),m=()=>{e.programmatic&&(n.value=!1,setTimeout(()=>{},150))},p=()=>{!e.canCancel||!n.value||(m(),e.onCancel())},l=a=>{a.keyCode===27&&p()},h=()=>{e.isFullPage&&e.lockScroll&&document.body.classList.add("vld-shown")},u=()=>{e.isFullPage&&e.lockScroll&&document.body.classList.remove("vld-shown")};return Z(()=>{e.programmatic&&(n.value=!0,document.addEventListener("keyup",l))}),ee(()=>{document.removeEventListener("keyup",l)}),I(()=>e.active,()=>{n.value=e.active}),I(n,()=>{n.value?h():u()}),{isActive:n,bgStyle:c,hide:m,cancel:p}},components:rt});const it={class:"vld-icon"};function lt(e,t,n,c,m,p){return d(),x(Y,{ref:"root",name:e.transition},{default:G(()=>[E(r("div",{tabindex:"0",class:["vld-overlay is-active",{"is-full-page":e.isFullPage}],"aria-busy":e.isActive,"aria-label":"Loading",style:{zIndex:e.zIndex}},[r("div",{class:"vld-background",onClick:t[1]||(t[1]=w((...l)=>e.cancel&&e.cancel(...l),["prevent"])),style:e.bgStyle},null,4),r("div",it,[B(e.$slots,"before"),B(e.$slots,"default",{},()=>[(d(),x(J(e.loader),{color:e.color,width:e.width,height:e.height},null,8,["color","width","height"]))]),B(e.$slots,"after")])],14,["aria-busy"]),[[W,e.isActive]])]),_:3},8,["name"])}H.render=lt;H.__file="src/main/Component.vue";const ut={__name:"FullScreenLoading",props:{showLoading:{type:Boolean,required:!0}},setup(e){const t=e;return(n,c)=>(d(),x(g(H),{active:t.showLoading,"is-full-page":!0,color:"#d87355",loader:"spinner",width:64,height:64,"background-color":"#ffffff",opacity:.5,"z-index":999},null,8,["active"]))}},dt={class:"sm:bg-linear-primary min-h-screen"},ct={class:"mx-auto px-3 pt-4"},mt={class:"w-full sm:w-2/3 lg:w-1/2 mx-auto mt-4 sm:mt-10 px-5"},pt={class:"mt-4"},ft={__name:"TodoListView",setup(e){const{data:t}=te(),{mutate:n}=oe(),c=se(),m=()=>{R("warning","確定要登出嗎").then(s=>{s.isConfirmed&&n(void 0,{onSuccess:()=>{c.push("/login")}})})},p=_(()=>t.value?.status??!1),l=_(()=>t.value?.nickname??""),{data:h,isLoading:u,isFetching:a}=de({enabled:p});return(s,i)=>(d(),f("div",dt,[o("div",ct,[r(be,{"user-nickname":l.value,onSign_out:m},null,8,["user-nickname"]),o("div",mt,[r(Ge),o("div",pt,[r(Ue,{todos:g(h)},null,8,["todos"])])])]),r(ut,{"show-loading":g(u)||g(a)},null,8,["show-loading"])]))}};export{ft as default};
