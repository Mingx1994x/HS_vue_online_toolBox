import{a as k,u as z,b as S,c as L,d as _,e as N,f as $,o as p,g as r,w as O,h as E,i as g,r as M,j as Q,v as R,T as X,k as b,l as y,m as K,n as G,p as P,q as J,s as W,t as f,x as a,_ as Y,y as x,F as D,z as I,A as w,B as T,C as V,D as U,E as B,G as Z,H as ee,I as te,J as oe,K as se,L as ne,M as ae,N as re}from"./index-C5XOTcjK.js";const ie={VITE_APP_BASEURL:"https://todolist-api.hexschool.io"},{VITE_APP_BASEURL:C}=ie,le=async()=>(await k.get(`${C}/todos`)).data,ue=e=>k.post(`${C}/todos`,{content:e}),de=e=>k.patch(`${C}/todos/${e}/toggle`),ce=async e=>(await k.delete(`${C}/todos/${e}`)).data,me=async({id:e,content:t})=>(console.log("editTodo",e,t),(await k.put(`${C}/todos/${e}`,{content:t})).data),pe=(e={})=>z({queryKey:["todo"],queryFn:le,enabled:e.enabled??!1,staleTime:1e3*60*5,cacheTime:1e3*60*30}),he=()=>{const e=S();return L({mutationFn:ue,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{_("error",t.response.data.message||"新增失敗，請重試或是洽詢客服")}})},fe=()=>{const e=S();return L({mutationFn:ce,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{_("error",t.response.data.message||"移除失敗，請重試或是洽詢客服")}})},ve=()=>{const e=S();return L({mutationFn:de,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{_("error",t.response.data.message||"完成勾選失敗，請重試或是洽詢客服")}})},ge=()=>{const e=S();return L({mutationFn:me,onSuccess:()=>{e.invalidateQueries(["todos"])},onError:t=>{_("error",t.response.data.message||"編輯失敗，請重試或是洽詢客服")}})};/**
 * Vue 3 Loading Overlay 0.0.0
 * (c) 2020
 * @license MIT
 */var F=N({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});const ye=r("g",{fill:"none","fill-rule":"evenodd"},[r("g",{transform:"translate(1 1)","stroke-width":"2"},[r("circle",{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}),r("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[r("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"})])])],-1);function be(e,t,o,d,l,h){return p(),$("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,stroke:e.color},[ye],8,["width","height","stroke"])}F.render=be;F.__file="src/loaders/Spinner.vue";var A=N({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}});const _e=r("circle",{cx:"15",cy:"15",r:"15"},[r("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1),$e=r("circle",{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"},[r("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})],-1),xe=r("circle",{cx:"105",cy:"15",r:"15"},[r("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1);function we(e,t,o,d,l,h){return p(),$("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:e.color,width:e.width,height:e.height},[_e,$e,xe],8,["fill","width","height"])}A.render=we;A.__file="src/loaders/Dots.vue";var q=N({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}});const ke=r("rect",{x:"0",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})],-1),Ce=r("rect",{x:"10",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})],-1),Te=r("rect",{x:"20",y:"13",width:"4",height:"5"},[r("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),r("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})],-1);function Se(e,t,o,d,l,h){return p(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:e.height,width:e.width,fill:e.color},[ke,Ce,Te],8,["height","width","fill"])}q.render=Se;q.__file="src/loaders/Bars.vue";var Le={Spinner:F,Dots:A,Bars:q},H=N({name:"vue-loading",props:{active:Boolean,programmatic:Boolean,container:[Object,Function,HTMLElement],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:{type:Number,default:100},loader:{type:String,default:"spinner"}},setup(e,t){const o=b(e.active),d=y(()=>({background:e.backgroundColor,opacity:e.opacity,backdropFilter:`blur(${e.blur})`})),l=()=>{e.programmatic&&(o.value=!1,setTimeout(()=>{},150))},h=()=>{!e.canCancel||!o.value||(l(),e.onCancel())},i=s=>{s.keyCode===27&&h()},c=()=>{e.isFullPage&&e.lockScroll&&document.body.classList.add("vld-shown")},u=()=>{e.isFullPage&&e.lockScroll&&document.body.classList.remove("vld-shown")};return K(()=>{e.programmatic&&(o.value=!0,document.addEventListener("keyup",i))}),G(()=>{document.removeEventListener("keyup",i)}),P(()=>e.active,()=>{o.value=e.active}),P(o,()=>{o.value?c():u()}),{isActive:o,bgStyle:d,hide:l,cancel:h}},components:Le});const Ne={class:"vld-icon"};function Me(e,t,o,d,l,h){return p(),$(X,{ref:"root",name:e.transition},{default:O(()=>[E(r("div",{tabindex:"0",class:["vld-overlay is-active",{"is-full-page":e.isFullPage}],"aria-busy":e.isActive,"aria-label":"Loading",style:{zIndex:e.zIndex}},[r("div",{class:"vld-background",onClick:t[1]||(t[1]=g((...i)=>e.cancel&&e.cancel(...i),["prevent"])),style:e.bgStyle},null,4),r("div",Ne,[M(e.$slots,"before"),M(e.$slots,"default",{},()=>[(p(),$(Q(e.loader),{color:e.color,width:e.width,height:e.height},null,8,["color","width","height"]))]),M(e.$slots,"after")])],14,["aria-busy"]),[[R,e.isActive]])]),_:3},8,["name"])}H.render=Me;H.__file="src/main/Component.vue";function Be(e,t,o){const d=J(e,t),l=document.createElement("div");return o.appendChild(l),W(d,l),d.component}function Ee(e){var t;typeof e.remove<"u"?e.remove():(t=e.parentNode)===null||t===void 0||t.removeChild(e)}function Fe(e={},t={}){let o=null;return{show(l=e,h=t){const c=Object.assign({},e,l,{programmatic:!0,lockScroll:!0,isFullPage:!1});let u=c.container;c.container||(u=document.body,c.isFullPage=!0),o=Be(H,c,u);const s=Object.assign({},t,h);Object.keys(s).map(n=>{o!=null&&(o.slots[n]=s[n])})},hide(){if(o!=null){o.ctx.hide();let l=o.vnode.el;Ee(l.parentElement)}}}}const Ae=()=>Fe({color:"#ffd370",loader:"spinner",width:64,height:64,backgroundColor:"#ffffff",opacity:.5,zIndex:999}),qe={class:"w-full px-5"},He={class:"flex justify-between items-center"},Pe={class:"flex"},De={class:"font-bold hidden sm:block me-6"},Ie={__name:"DashBoardHeader",props:{userNickname:{type:String,required:!0}},emits:["sign_out"],setup(e,{emit:t}){const o=e,d=t,l=()=>{d("sign_out")};return(h,i)=>(p(),f("header",qe,[a("div",He,[i[0]||(i[0]=a("img",{src:Y,alt:"logo",style:{width:"242.51px"}},null,-1)),a("div",Pe,[a("h2",De,x(o.userNickname)+"的代辦",1),a("a",{role:"button",class:"hover:text-red-700",onClick:l},"登出")])])]))}},Ve="/HS_vue_online_toolBox/empty%201.svg",Ue={class:"font-normal py-4 flex flex-col gap-y-4"},je={key:0,class:"border-b-2 border-neutral-100 -mb-[2px] pb-4 flex items-center"},ze=["onClick"],Oe=["onClick"],Qe={class:"ms-auto flex items-center gap-x-2"},Re=["onClick"],Xe=["onClick"],Ke={key:1,class:"flex items-center"},Ge=["onUpdate:modelValue"],Je={class:"ms-auto flex items-center gap-x-2"},We=["onClick"],Ye=["onClick"],Ze={key:1},et={__name:"TodoList",props:{mode:{type:String,default:"all"},todoList:{type:Array,required:!0}},setup(e){const t=e,{mutate:o}=fe(),d=s=>{U("warning","確定要刪除此代辦嗎").then(n=>{n.isConfirmed&&o(s,{onSuccess:()=>{B("success","刪除代辦成功")}})})},{mutate:l}=ve(),{mutate:h}=ge(),i=b({}),c=(s,n="")=>{i.value[s]?(i.value[s].isEditing=!i.value[s].isEditing,i.value[s].content=n):i.value[s]={isEditing:!0,content:n}},u=(s,n)=>{if(!n){_("error","請輸入代辦事項");return}h({id:s,content:n},{onSuccess:()=>{B("success","編輯成功"),c(s)}})};return(s,n)=>(p(),f("ul",Ue,[e.todoList.length?(p(!0),f(D,{key:0},I(t.todoList,m=>(p(),f("li",{key:m.id},[i.value[m.id]?.isEditing?(p(),f("div",Ke,[E(a("input",{type:"text",class:"bg-neutral-100 text-neutral-500 leading-none border-b-1 border-neutral-300 rounded-[10px] focus:ring-neutral-500 focus:border-neutral-500 block w-[80%] py-2 ps-3 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":v=>i.value[m.id].content=v},null,8,Ge),[[V,i.value[m.id].content]]),a("div",Je,[a("button",{type:"button",onClick:v=>c(m.id)},[...n[4]||(n[4]=[a("span",{class:"material-symbols-outlined close-icon text-alert-500"}," close ",-1)])],8,We),a("button",{type:"button",onClick:v=>u(m.id,i.value[m.id].content)},[...n[5]||(n[5]=[a("span",{class:"material-symbols-outlined circle-icon text-lime-600"}," circle ",-1)])],8,Ye)])])):(p(),f("div",je,[m.status?(p(),f("button",{key:0,type:"button",onClick:v=>w(l)(m.id)},[...n[0]||(n[0]=[a("span",{class:"material-symbols-outlined check-icon text-primary-500 hover:text-alert-500"}," check ",-1)])],8,ze)):(p(),f("button",{key:1,type:"button",onClick:v=>w(l)(m.id)},[...n[1]||(n[1]=[a("span",{class:"material-symbols-outlined checkbox-icon text-neutral-300 hover:text-alert-500"}," check_box_outline_blank ",-1)])],8,Oe)),a("p",{class:T(["ms-4",m.status?"text-neutral-300 line-through":""])},x(m.content),3),a("div",Qe,[a("button",{type:"button",onClick:v=>c(m.id,m.content)},[...n[2]||(n[2]=[a("span",{class:"material-symbols-outlined edit-icon text-neutral-500 hover:text-alert-500"}," edit_square ",-1)])],8,Re),a("button",{type:"button",onClick:v=>d(m.id)},[...n[3]||(n[3]=[a("span",{class:"material-symbols-outlined delete-icon text-neutral-500 hover:text-alert-500"}," delete ",-1)])],8,Xe)])]))]))),128)):(p(),f("li",Ze,"目前並無"+x(e.mode==="isDone"?"已完成":"待完成")+"代辦事項",1))]))}},tt={key:0,class:"bg-white text-sm rounded-[10px] px-4 pb-4 md:px-6 custom-drop-shadow"},ot={class:"text-neutral-300 dark:text-gray-400 text-center font-bold flex flex-wrap -mx-4 -mb-[2px]"},st={class:"w-1/3"},nt={class:"w-1/3"},at={class:"w-1/3"},rt={class:"py-2"},it={key:1,class:"w-2/3 mx-auto mt-8 flex flex-col lg:mt-12"},lt={__name:"TodoBox",props:{todos:{type:Object}},setup(e){const t=e,o=b("all"),d=u=>{o.value=u},l=y(()=>{switch(o.value){case"isDone":return t.todos?.data.filter(u=>u.status)??[];case"undone":return t.todos?.data.filter(u=>!u.status)??[];default:return t.todos?.data??[]}}),h=y(()=>t.todos?.data.length??0),i=y(()=>t.todos?.data.filter(u=>!u.status).length??0),c=u=>({"block p-4 border-b-2":!0,"border-neutral-100 hover:border-gray-300":o.value!==u,"text-neutral-500 border-neutral-500":o.value===u});return(u,s)=>h.value!==0?(p(),f("div",tt,[a("ul",ot,[a("li",st,[a("a",{class:T(c("all")),onClick:s[0]||(s[0]=g(n=>d("all"),["prevent"]))},"全部",2)]),a("li",nt,[a("a",{class:T(c("undone")),onClick:s[1]||(s[1]=g(n=>d("undone"),["prevent"])),"aria-current":"page"},"待完成",2)]),a("li",at,[a("a",{class:T(c("isDone")),onClick:s[2]||(s[2]=g(n=>d("isDone"),["prevent"]))},"已完成",2)])]),r(et,{mode:o.value,"todo-list":l.value},null,8,["mode","todo-list"]),a("p",rt,x(i.value)+" 個待完成項目",1)])):(p(),f("div",it,[...s[3]||(s[3]=[a("p",{class:"text-center mb-4"},"目前尚無待辦事項",-1),a("img",{src:Ve,alt:"目前尚無待辦事項"},null,-1)])]))}},ut=3,j=Z("todoStore",()=>{const e=b([]);function t(o){e.value.length<ut?e.value.unshift(o):(e.value.unshift(o),e.value.pop())}return{historyTodos:e,saveHistoryTodos:t}}),dt={key:0,class:"w-full absolute top-0 left-0 translate-y-[56px]"},ct={class:"bg-white text-sm rounded-[10px] px-4 py-4 md:px-6 custom-drop-shadow"},mt={class:"font-normal -mx-4 flex flex-col gap-y-2"},pt=["onMousedown"],ht={__name:"TodoHistoryList",props:{isShowHistory:{type:Boolean,required:!0}},emits:["add-history"],setup(e,{emit:t}){const o=e,d=t,l=j(),{historyTodos:h}=ee(l),i=c=>{d("add-history",c)};return(c,u)=>o.isShowHistory&&w(h).length>0?(p(),f("div",dt,[a("div",ct,[a("ul",mt,[(p(!0),f(D,null,I(w(h),s=>(p(),f("li",{key:s,class:"px-3 py-2 flex items-center hover:bg-neutral-100",onMousedown:g(n=>i(s),["prevent"])},[u[0]||(u[0]=a("span",{class:"material-symbols-outlined me-4"}," history_2 ",-1)),oe(" "+x(s),1)],40,pt))),128))])])])):te("",!0)}},ft={__name:"TodoAddInput",setup(e){const t=b(""),{mutate:o}=he(),d=j(),{saveHistoryTodos:l}=d,h=s=>{if(!s){_("error","請輸入代辦事項");return}o(s,{onSuccess:()=>{l(s),B("success","新增成功"),t.value=""}})},i=b(!1),c=()=>{setTimeout(()=>{i.value=!1},150)},u=s=>{t.value=s,i.value=!1};return(s,n)=>(p(),f("form",{class:"relative",onSubmit:n[2]||(n[2]=g(m=>h(t.value),["prevent"]))},[E(a("input",{type:"text",id:"register_nickname",class:"bg-neutral-50 text-neutral-500 border-none rounded-[10px] focus:ring-neutral-500 focus:border-neutral-500 block w-full py-3 ps-4 custom-drop-shadow",placeholder:"新增待辦事項","onUpdate:modelValue":n[0]||(n[0]=m=>t.value=m),onFocus:n[1]||(n[1]=()=>i.value=!0),onBlur:c},null,544),[[V,t.value,void 0,{trim:!0}]]),n[3]||(n[3]=a("button",{type:"submit",class:"btn-square btn-neutral rounded-[10px] absolute bottom-0 right-0 -translate-[4px]"},[a("span",{class:"material-symbols-outlined add-icon"}," add ")],-1)),r(ht,{"is-show-history":i.value,onAddHistory:u},null,8,["is-show-history"])],32))}},vt={class:"sm:bg-linear-primary min-h-screen"},gt={class:"mx-auto px-3 pt-4"},yt={class:"w-full sm:w-2/3 lg:w-1/2 mx-auto mt-4 sm:mt-10 px-5"},bt={class:"mt-4"},$t={__name:"TodoListView",setup(e){const{data:t}=se(),{mutate:o}=ne(),d=re(),l=()=>{U("warning","確定要登出嗎").then(m=>{m.isConfirmed&&o(void 0,{onSuccess:()=>{d.push("/login")}})})},h=y(()=>t.value?.status??!1),i=y(()=>t.value?.nickname??""),{data:c,isLoading:u,isFetching:s}=pe({enabled:h}),n=Ae();return ae(()=>{u.value||s.value?n.show():n.hide()}),(m,v)=>(p(),f("div",vt,[a("div",gt,[r(Ie,{"user-nickname":i.value,onSign_out:l},null,8,["user-nickname"]),a("div",yt,[r(ft),a("div",bt,[r(lt,{todos:w(c)},null,8,["todos"])])])])]))}};export{$t as default};
